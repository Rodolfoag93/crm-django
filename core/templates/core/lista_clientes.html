{% extends 'core/base.html' %}
{% block content %}

<h2>Lista de Clientes</h2>

<!-- BotÃ³n Nuevo Cliente -->
<div style="margin-bottom: 20px;">
    <a href="{% url 'nuevo_cliente' %}"
       style="
          display: inline-block;
          width: 50px;
          height: 50px;
          background-color: #4CAF50;
          color: white;
          font-size: 28px;
          font-weight: bold;
          text-align: center;
          line-height: 50px;
          border-radius: 8px;
          text-decoration: none;
          transition: background-color 0.3s;
       "
       onmouseover="this.style.backgroundColor='#45a049';"
       onmouseout="this.style.backgroundColor='#4CAF50';"
       title="Nuevo Cliente">
        +
    </a>
</div>

<form method="get" style="margin-bottom: 20px; display: flex; gap: 10px; align-items: center;">
    <input type="text" name="q" placeholder="Buscar por nombre o telÃ©fono..." value="{{ request.GET.q }}">
    <button type="submit">Buscar</button>
    <a href="{% url 'lista_clientes' %}">Limpiar</a>
</form>

<table border="1" width="100%">
    <thead>
        <tr>
            <th><a href="?orden=nombre{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Nombre</a></th>
            <th><a href="?orden=telefono{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">TelÃ©fono</a></th>
            <th>Calle y nÃºmero</th>
            <th>Colonia</th>
            <th>Ciudad / Municipio</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for cliente in clientes %}
        <tr>
            <td>{{ cliente.nombre }}</td>
            <td>{{ cliente.telefono }}</td>
            <td>{{ cliente.calle_y_numero }}</td>
            <td>{{ cliente.colonia }}</td>
            <td>{{ cliente.ciudad_o_municipio }}</td>
            <td style="display:flex; gap:5px;">
                <!-- Nueva Renta -->
                <a href="{% url 'nueva_renta' %}?cliente={{ cliente.id }}"
                   style="padding:5px 10px; background:#4CAF50; color:white; text-decoration:none; border-radius:5px;">
                   â• Renta
                </a>

                <!-- Editar Cliente -->
                <a href="{% url 'editar_cliente' cliente.id %}"
                   style="padding:5px 10px; background:#2196F3; color:white; text-decoration:none; border-radius:5px;">
                   âœï¸ Editar
                </a>

                <!-- Eliminar Cliente -->
                <a href="{% url 'eliminar_cliente' cliente.id %}"
                   style="padding:5px 10px; background:#f44336; color:white; text-decoration:none; border-radius:5px;"
                   onclick="return confirm('Â¿Seguro que quieres eliminar este cliente?');">
                   ğŸ—‘ï¸ Eliminar
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">No hay clientes</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}